<%- include('../partials/headerTop.ejs') %>
    
    <%- include('../partials/navbarStyle.ejs') %> 
    <%- include('../partials/clientStyle.ejs') %> 

<%- include('../partials/headerBottom.ejs') %> 

    <%- include('../partials/navbar.ejs') %> 

    <div class="container">

        
        <div class="containerClients">

            <% if(clients.length === 0) { %> 

                <h2>sin clientes</h2>
                <a href="/client/add">
                    <i class="fa-solid fa-plus"></i>
                    <span>New Client</span>
                </a>

            <% } else { %> 

                <div class="add">
                    <a href="/client/add">
                        <i class="fa-solid fa-plus"></i>
                        <span>New Client</span>
                    </a>
                </div>
                
                <% clients.forEach(function (client) { %>
            
                    

                    <div class="client">

                        <a href="/client/edit/<%= client.id.toString() %> ">
                            
                            <% const initialDate = client.initialDate %> 
                            <% const finalDate = client.finalDate %>
                            <% const restDays = Math.floor((finalDate - initialDate) / (1000 * 60 * 60 * 24)); %>  
                
                            <div>
                                <span><%= client.name %> </span>
                                <span><%= client.lastName %> </span>
                            </div>
                                
                            <span>GYM: <%= client.gym %> </span>
            
                            <div>
                                <span><%= initialDate.toISOString().slice(0, 10) %> </span>
                                <span> / <%= finalDate.toISOString().slice(0, 10) %> </span>
                            </div>
    
                            <div class="date">
                                <span>DAYS REST: <%= restDays %> </span>
                                <span>TIMES: <%= client.times %> </span>
                            </div>
        
                            <div class="options">
                                <form action="/client/edit/<%= client.id.toString() %> ">
                                    <button>
                                        <i class="fa-solid fa-pen"></i>
                                        <span>Edit</span>
                                    </button>
                                </form>
                                <form action="/client/delete/<%= client.id %>?_method=delete" method="post">
                                    <input type="hidden" name="_method" value="delete">
                                    <button>
                                        <i class="fa-solid fa-trash"></i>
                                        <span>Delete</span>
                                    </button>
                                </form>
                            </div>
                        </a>
            
                    </div>
            
                <% }); %> 

            <% } %> 

        </div>

    </div>


<%- include('../partials/footer.ejs') %> 
